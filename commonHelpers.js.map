{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import { lightbox, closeLoader } from '../main';\nimport { refs } from '../main';\n\nexport function renderGallery(array) {\n  if (array.length === 0) {\n    closeLoader();\n    iziToast.warning({\n      message: 'Sorry, there are no images matching your search query. Please try again!',\n      color: 'red',\n      position: 'topRight',\n    });\n    form.reset();\n  } else {\n    const showGalleryArr = array\n      .map(image => {\n        return `<li class=\"gallery-item\">\n        <a href=\"${image.largeImageURL}\">\n        <img class=\"photo\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n        </a>\n        <ul class=\"info-list\">\n          <li class=\"info-list-item\">\n            Likes\n            <p>${image.likes}</p>\n          </li>\n          <li class=\"info-list-item\">\n            Views\n            <p>${image.views}</p>\n          </li>\n          <li class=\"info-list-item\">\n            Comments\n            <p>${image.comments}</p>\n          </li>\n          <li class=\"info-list-item\">\n            Downloads\n            <p>${image.downloads}</p>\n          </li>\n        </ul>\n      </li>`;\n      })\n      .join('');\n\n    refs.gallery.insertAdjacentHTML('beforeend', showGalleryArr);\n\n    lightbox.refresh();\n  }\n  closeLoader();\n}\n","\nimport axios from 'axios';\n\nexport async function getImages(query, currentPage) {\n  const BASE_URL = 'https://pixabay.com';\n  const endPoint = '/api/';\n  const url = BASE_URL + endPoint;\n  const params = {\n    key: '44405455-dc304595c2bd7cb59ead2c04f',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: currentPage,\n    per_page: 15,\n  };\n  const res = await axios.get(url, {params});\n  return res.data;\n}","import axios from 'axios';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { renderGallery } from './js/render-functions';\nimport { getImages } from './js/pixabay-api';\n\nexport const lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport const refs = {\n  gallery: document.querySelector('.gallery'),\n  formEl: document.querySelector('.form'),\n  searchBtn: document.querySelector('.search-btn'),\n  loadMoreBtn: document.querySelector('.load-more-btn'),\n  loaderBox: document.querySelector('.loader'),\n};\n\nlet query;\nlet currentPage = 1;\nconst pageSize = 15;\nlet maxPage = 0;\n\nfunction showLoadMoreBtn() {\n  refs.loadMoreBtn.classList.remove('visually-hidden');\n}\n\nfunction closeLoadMoreBtn() {\n  refs.loadMoreBtn.classList.add('visually-hidden');\n}\n\nfunction showLoader() {\n  refs.loaderBox.classList.remove('visually-hidden');\n}\n\nexport function closeLoader() {\n  refs.loaderBox.classList.add('visually-hidden');\n}\n\nfunction checkBtnStatus() {\n  if (currentPage >= maxPage) {\n    iziToast.success({\n      color: 'blue',\n      position: 'topRight',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n    closeLoadMoreBtn();\n  } else {\n    showLoadMoreBtn();\n  }\n}\n\nfunction myScroll() {\n  const height = refs.gallery.firstChild.getBoundingClientRect().height;\n\n  scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}\n\nrefs.formEl.addEventListener('submit', onFormSubmit);\nrefs.loadMoreBtn.addEventListener('click', onLoadMoreClick);\n\nasync function onFormSubmit(event) {\n  event.preventDefault();\n  refs.gallery.innerHTML = '';\n  query = event.target.elements.inputname.value.trim();\n  showLoader();\n  currentPage = 1;\n  if (query !== '') {\n    try {\n      const data = await getImages(query, currentPage);\n      maxPage = Math.ceil(data.totalHits / pageSize);\n      renderGallery(data.hits);\n    } catch {\n      iziToast.warning({\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        color: 'red',\n        position: 'topRight',\n      });\n    }\n  } \n\n  event.target.reset();\n  closeLoader();\n  checkBtnStatus();\n}\n\nasync function onLoadMoreClick() {\n  currentPage += 1;\n  closeLoadMoreBtn();\n  showLoader();\n  try {\n    const data = await getImages(query, currentPage);\n    renderGallery(data.hits);\n  } catch {\n    iziToast.show({\n      message: 'Error',\n      color: 'red',\n      position: 'topRight',\n    });\n  }\n\n  closeLoader();\n  checkBtnStatus();\n  myScroll();\n}\n"],"names":["renderGallery","array","closeLoader","showGalleryArr","image","refs","lightbox","getImages","query","currentPage","url","params","axios","SimpleLightbox","pageSize","maxPage","showLoadMoreBtn","closeLoadMoreBtn","showLoader","checkBtnStatus","iziToast","myScroll","height","onFormSubmit","onLoadMoreClick","event","data"],"mappings":"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"}